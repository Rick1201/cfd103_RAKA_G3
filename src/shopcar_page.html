<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ShopCar</title>
    <link rel="stylesheet" href="../dist/css/style.css" />
</head>
<body>
    @@include('./layout/header.html')
<div class="entzu01" id="app">    
    <section class="shoppage">
        <div class="item">
            <div class="item_detail" v-for="(item,index) in itemList" :key="item.id">
                <img v-bind:src="item.prodImg" alt="">
                <h4>{{item.prodName}}</h4>
                <div class="information">
                    <button @click="handleSub(item,index)">-</button>
                    {{item.count}}
                    <button @click="handlePlus(item,index)">+</button>
                    <span>${{item.prodPrice}}</span>
                    <dt @click="handleDelete(item,index)">刪除</dt>
               </div> 
            </div>
        </div>
            <div class="money_detail">
                <div class="money">
                    <div class="m01">
                        <h2>訂單金額</h2>
                    </div>
                </div>
                <div class="money01">    
                    <div class="m02">
                        <p>海洋飛行PCB-01</p>
                        <p5>$75,000</p5>
                    </div> 
                    <div class="m03">
                        <p>1個</p>
                        <p5>小計$75,000</p5>
                    </div>
                </div>
                <div class="money02">
                    <div class="m05">
                        <p>海洋飛行PCB-01</p>
                        <p5>$75,000</p5>
                    </div>
                    <div class="m06">
                        <p>1個</p>
                        <p5>小計$75,000</p5>
                    </div>
                </div>
                <div class="money03">
                    <div class="m05">
                        <p>海洋飛行PCB-01</p>
                        <p5>$75,000</p5>
                    </div>
                    <div class="m06">
                        <p>1個</p>
                        <p5>小計$75,000</p5>
                    </div>
                </div>                 
            <span>總計13,0000</span>
            <a href="checkout_list.html">
                <button>結帳</button>
            </a>
    </section>
</div>   

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
<script>
    new Vue({
        el: '#app',
        data: {
            itemList:[],
        },
        methods: {
            handlePlus(item,index){
                // console.log(item);
                item.count++;
            },
            handleSub(item,index){
                // console.log(item);
                if(item.count>1){
                    item.count--;
                }else{
                    this.handleDelete(item,index);
                }
            },
            handleDelete(item,index){
                this.itemList.splice(index,1);
            }
        },
        mounted(){
            let storageArray = JSON.parse(localStorage.getItem('addList'));
            let storageCount = storageArray.length;
            this.itemList = storageArray;
            console.log(storageCount)
        },
    })
</script>
@@include('./layout/footer.html')    
</body>
</html>